{
    "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "ResourceGroupLocation": {
            "type": "string",
            "metadata": {
                "description": "Deployment region"
            }
        },
        "ResourceGroup_Name": {
            "type": "string",
            "metadata": {
                "description": "Deployment region"
            }
        },
        "vmName": {
            "type": "string",
            "metadata": {
                "description": "VM Name"
            }
        },
        "vmSize": {
            "type": "string",
            "metadata": {
                "description": "VM Size"
            },
            "defaultValue": "Standard_GS5",
            "allowedValues": [
                "Standard_GS5",
                "Standard_M64s",
                "Standard_M64ms",
                "Standard_M128s",
                "Standard_M128ms"
            ]
        },
        "networkName": {
            "type": "string",
            "metadata": {
                "description": "The Hana vNet"
            }
        },
        "addressPrefixes": {
            "type": "string",
            "metadata": {
                "description": "The Hana vNET prefix"
            }
        },
        "subnetName": {
            "type": "string",
            "metadata": {
                "description": "The Hana subnet name"
            }
        },
        "subnetPrefix": {
            "type": "string",
            "metadata": {
                "description": "The data subnet"
            }
        },
        "fileUri": {
            "type": "string",
            "metadata": {
                "decription": "Uri for MOF file"
            }
        },
        "bootfileUri": {
            "type": "string",
            "metadata": {
                "decription": "Uri2 for MOF file"
            }
        },
        "customUri": {
            "type": "string",
            "metadata": {
                "description": "Uri for Custom Script Extension"
            }
        }
    },
    "variables": {
        "vmName": "[toLower(parameters('vmName'))]"
    },
    "resources": [{
            "condition": "[equals(parameters('vmSize'), 'Standard_GS5')]",
            "apiVersion": "2016-09-01",
            "name": "Gs5LinkedTemplate",
            "type": "Microsoft.Resources/deployments",
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "https://raw.githubusercontent.com/AzureCAT-GSI/SAP-HANA-ARM/VmSizes/Vms/gs5.json"
                },
                "parameters": {
                    "vmName": {
                        "value": "[variables('vmName')]"
                    },
                    "fileUri": {
                        "value": "[parameters('fileUri')]"
                    },
                    "bootfileUri": {
                        "value": "[parameters('bootfileUri')]"
                    },
                    "customUri": {
                        "value": "[parameters('customUri')]"
                    },
                    "networkName": {
                        "value": "[parameters('networkName')]"
                    },
                    "addressPrefixes": {
                        "value": "[parameters('addressPrefixes')]"
                    },
                    "subnetName": {
                        "value": "[parameters('subnetName')]"
                    },
                    "subnetPrefix": {
                        "value": "[parameters('subnetPrefix')]"
                    }
                }
            }
        },
        {
            "condition": "[equals(parameters('vmSize'), 'Standard_M64s')]",
            "apiVersion": "2016-09-01",
            "name": "M64sLinkedTemplate",
            "type": "Microsoft.Resources/deployments",
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "https://raw.githubusercontent.com/AzureCAT-GSI/SAP-HANA-ARM/VmSizes/Vms/m64s.json"
                },
                "parameters": {
                    "vmName": {
                        "value": "[variables('vmName')]"
                    },
                    "fileUri": {
                        "value": "[parameters('fileUri')]"
                    },
                    "bootfileUri": {
                        "value": "[parameters('bootfileUri')]"
                    },
                    "customUri": {
                        "value": "[parameters('customUri')]"
                    },
                    "networkName": {
                        "value": "[parameters('networkName')]"
                    },
                    "addressPrefixes": {
                        "value": "[parameters('addressPrefixes')]"
                    },
                    "subnetName": {
                        "value": "[parameters('subnetName')]"
                    },
                    "subnetPrefix": {
                        "value": "[parameters('subnetPrefix')]"
                    }
                }
            }
        },
        {
            "condition": "[equals(parameters('vmSize'), 'Standard_M64ms')]",
            "apiVersion": "2016-09-01",
            "name": "M64msLinkedTemplate",
            "type": "Microsoft.Resources/deployments",
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "https://raw.githubusercontent.com/AzureCAT-GSI/SAP-HANA-ARM/VmSizes/Vms/m64ms.json"
                },
                "parameters": {
                    "vmName": {
                        "value": "[variables('vmName')]"
                    },
                    "fileUri": {
                        "value": "[parameters('fileUri')]"
                    },
                    "bootfileUri": {
                        "value": "[parameters('bootfileUri')]"
                    },
		    
                    "customUri": {
                        "value": "[parameters('customUri')]"
                    },
                    "networkName": {
                        "value": "[parameters('networkName')]"
                    },
                    "addressPrefixes": {
                        "value": "[parameters('addressPrefixes')]"
                    },
                    "subnetName": {
                        "value": "[parameters('subnetName')]"
                    },
                    "subnetPrefix": {
                        "value": "[parameters('subnetPrefix')]"
                    }
                }
            }
        },
        {
            "condition": "[equals(parameters('vmSize'), 'Standard_M128s')]",
            "apiVersion": "2016-09-01",
            "name": "M128sLinkedTemplate",
            "type": "Microsoft.Resources/deployments",
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "https://raw.githubusercontent.com/AzureCAT-GSI/SAP-HANA-ARM/VmSizes/Vms/m128s.json"
                },
                "parameters": {
                    "vmName": {
                        "value": "[variables('vmName')]"
                    },
                    "fileUri": {
                        "value": "[parameters('fileUri')]"
                    },
                    "bootfileUri": {
                        "value": "[parameters('bootfileUri')]"
                    },
		    
                    "customUri": {
                        "value": "[parameters('customUri')]"
                    },
                    "networkName": {
                        "value": "[parameters('networkName')]"
                    },
                    "addressPrefixes": {
                        "value": "[parameters('addressPrefixes')]"
                    },
                    "subnetName": {
                        "value": "[parameters('subnetName')]"
                    },
                    "subnetPrefix": {
                        "value": "[parameters('subnetPrefix')]"
                    }
                }
            }
        },
        {
            "condition": "[equals(parameters('vmSize'), 'Standard_M128ms')]",
            "apiVersion": "2016-09-01",
            "name": "M128msLinkedTemplate",
            "type": "Microsoft.Resources/deployments",
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "https://raw.githubusercontent.com/AzureCAT-GSI/SAP-HANA-ARM/VmSizes/Vms/m128ms.json"
                },
                "parameters": {
                    "vmName": {
                        "value": "[variables('vmName')]"
                    },
                    "fileUri": {
                        "value": "[parameters('fileUri')]"
                    },
                    "bootfileUri": {
                        "value": "[parameters('bootfileUri')]"
                    },
		    
                    "customUri": {
                        "value": "[parameters('customUri')]"
                    },
                    "networkName": {
                        "value": "[parameters('networkName')]"
                    },
                    "addressPrefixes": {
                        "value": "[parameters('addressPrefixes')]"
                    },
                    "subnetName": {
                        "value": "[parameters('subnetName')]"
                    },
                    "subnetPrefix": {
                        "value": "[parameters('subnetPrefix')]"
                    }
                }
            }
        }
    ],
    "outputs": {}
}
